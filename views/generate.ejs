<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayList</title>

    <style>
      /* Add CSS styles to control spacing and create columns */
      * {
          font-family: sans-serif;
      }

      .payListInformation li {
        font-size: 20px;
        padding: 5px;
      }

      .payList {
        text-align: center;
        color: #343a40;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        font-size: 20px;
      }

      th,
      td {
        border: 1px solid black;
        text-align: center;
        padding: 5px;
      }

      th {
        background-color: #ccc;
        /* style better */
      }
    </style>
</head>
<body>
    <!-- Access the payRunData object in your EJS template -->
    <h1 class="payList">PayList</h1>
    <ul class="payListInformation">
        <li>Status: <%= data?.status %></li>
        <li>Earnings: <%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(data.earnings)?.replace('MKD', 'дeн') %></li>
        <li>Effective Net: <%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(data.effectiveNet)?.replace('MKD', 'дeн') %></li>
        <li>Start Date: <% var startDate = new Date(data.startDate); %>
            <%= startDate.getFullYear() %>-<%= (startDate.getMonth() + 1).toString().padStart(2, '0') %>-<%= startDate.getDate().toString().padStart(2, '0') %></li>
        <li>End Date: <% var endDate = new Date(data.endDate); %>
            <%= endDate.getFullYear() %>-<%= (endDate.getMonth() + 1).toString().padStart(2, '0') %>-<%= endDate.getDate().toString().padStart(2, '0') %></li>
        <li>Paid Dates:
            <% if (data.paidDates && data.paidDates.length > 0) { %>
                <ul>
                    <% for (let payRunDate of data.paidDates) { %>
                        <% var formattedDate = new Date(payRunDate).toISOString().slice(0, 10); %>
                        <li><%= formattedDate %></li>
                    <% } %>
                </ul>
            <% } else { %>
                No paid dates available.
            <% } %>
        </li>
        
    </ul>

        <br>
        <table>
            <tr>
                <th style="text-align: left;">Employee</th>
                <th style="text-align: right;">Base Gross</th>
                <th style="text-align: right;">Effective Gross Salary</th>
                <th style="text-align: right;">Effective Net Salary</th>
                <th style="text-align: right;">Income Tax Amount</th>
                <th style="text-align: right;">Additional Health Ins Amount</th>
                <th style="text-align: right;">Unemployment Ins Amount</th>
            </tr>
        </thead>
            <tbody>
                <% for (let item of data.payRunData) { %>
                    <tr>
                        <td style="text-align: left;"><%= item.employee.name %> <%= item.employee.surname %></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.baseGross)?.replace('MKD', 'дeн') %></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.effectiveGross)?.replace('MKD', 'дeн') %></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.effectiveNetSalary)?.replace('MKD', 'дeн')%></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.incomeTaxAmount)?.replace('MKD', 'дeн') %></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.additionalHealthInsAmount)?.replace('MKD', 'дeн') %></td>
                        <td style="text-align: right;"><%= new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'MKD', currencyDisplay: 'code' }).format(item.unemploymentInsAmount)?.replace('MKD', 'дeн')%></td>
                    </tr>
                <% } %>
            </tbody>
        </table>
</body>
</html>

